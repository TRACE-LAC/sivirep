---
title: "Reporte Automatizado para Dengue, Colombia 2020"
author: "TRACE-LAC"
date: '2023-02-01'
output:
  pdf_document: 
    number_sections: true
  html_document:
    number_sections: true
  word_document: 
    number_sections: true
header-includes:
- \usepackage{fancyhdr}
subtitle: (fuente SIVIGILA, Datos libres)
---

```{r setup, echo=FALSE, error=FALSE, fig.height=5, fig.width=5, warning=FALSE, include = FALSE, message= FALSE}
knitr::opts_chunk$set(echo = TRUE)
#remotes::install_github("epiverse-trace/sivirep", ref = "dev-feature-sections-bsreport")

rm(list = ls())

library(sivirep)
```

```{r import_data, echo=FALSE, error=FALSE, fig.height=8, fig.width=8, warning=FALSE, include = FALSE, message= FALSE}
.
En total en Colombia durante `r year` se reportaron `r nrow(disease_data)` casos en todo el territorio nacional. 


# Distribución temporal de los casos 

```{r cases_by_onset_symptom_date, echo=FALSE, error=FALSE, fig.height=5, fig.width=8, warning=FALSE, include=TRUE, message=FALSE}

distribution_by_onset_sym_section <- get_cases_distribution_by_onset_sym_section(disease_data, year, type = "month", col_name = "INI_SIN", col_cmp = "FEC_HOS", plot_title = "Figura 1. Distribución de casos por fecha de inicio de síntomas.")
months_major_cases <- get_months_major_cases(distribution_by_onset_sym_section$disease_cases, col_dates = "INI_SIN", col_cases = "Casos")

```

Los casos se distribuyen a lo largo de los meses de enero a diciembre de `r year`, teniendo un mayor reporte en los meses `r months_major_cases` tanto por fecha de inicio de síntomas (Ver Figura 1) como por fecha de notificación (Ver Figura 2). Este comportamiento pudo haber sido distinto a años previos debido al inicio de estrategias de control de COVID-19 a comienzos de marzo de `r year`.

```{r distribution_by_onset_symptom_date_section, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_onset_sym_section$plot
```
```{r distribution_not, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_notification_date_section <- get_cases_distribution_by_notification_date_section(disease_data, year, type = "month", col_name = "FEC_NOT", plot_title = paste0("Figura 2. Fecha de notificación de los casos de ", disease_name))
distribution_by_notification_date_section$plot
```

# Distribución de casos por sexo y semana epidemiológica

```{r distribution_cg, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_gender_section <- get_cases_distribution_by_gender_section(disease_data, year, col_name = "SEXO", percentage = T, plot_title = "Figura 3. Distribucion de casos por la variable sexo.")
```

En el total de casos para `r year` se observa una predominancia del sexo masculino (`r distribution_by_gender_section$male_percentage`%) con respecto al sexo femenino (`r distribution_by_gender_section$female_percentage`%) (Ver Figura 3).

```{r distribution_cg_plot, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_gender_section$plot
```

```{r distribution_cg_epiweek, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_gender_and_week_section <- get_cases_distribution_by_gender_and_week_section(disease_data, year, col_names = c("SEXO", "SEMANA"), plot_title = "Figura 4. Distribucion de casos por la variable sexo y semana epidemiologica.")
```

Esta predominancia del reporte de casos en sexo masculino se mantuvo a lo largo de todas las semanas epidemiológicas (Ver figura 4).

```{r distribution_epiweek, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_gender_and_week_section$plot
```

# Distribución de casos por edad y semana epidemiológica

```{r distribution_age_d, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_age_and_week_section <- get_cases_distribution_by_age_and_week_section(disease_data, year, col_names = c("EDAD", "SEMANA"), percentage = T, plot_title = "Figura 5. Distribucion de casos por edad.")
```

La distribución de los casos por grupos etarios muestra una tendencia decreciente a medida que se avanza en la edad. La población de `r distribution_by_age_and_week_section$age_range_major_cases$EDAD` años representó el   `r  distribution_by_age_and_week_section$percentage_major_cases` % de todos los casos de `r disease_name` en el país (Ver figura 5).
De forma interesante, aunque el sexo masculino predominó en casi todos los grupos etários,  para el grupo de 0-10 años esta predominancia fue mucho menos marcada (Ver Figura 6).

```{r distribution_age, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_age_and_week_section$plot
```

# Distribución de casos por edad y sexo
```{r distribution_age_anger, echo=FALSE, error=FALSE, fig.height=5, fig.width=10, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_age_and_gender_section <- get_cases_distribution_by_age_and_gender_section(disease_data, year, col_names = c("EDAD", "SEXO"), percentage = T, plot_title = "Figura 6. Distribucion de casos por edad y sexo.")
distribution_by_age_and_gender_section$plot

```

# Distribución de casos por población especial
```{r distribution_sp, echo=FALSE, error=FALSE, fig.height=5, fig.width=15, warning=FALSE, include=TRUE, message=FALSE}
distribution_by_special_population_section <- get_cases_distribution_by_special_population_section(disease_data, year, plot_title = "Figura 6. Distribucion de casos por poblacion especial")
distribution_by_special_population_section$plot
```

# Distribución espacial de casos

```{r distribution_spatial, echo=FALSE, error=FALSE, fig.height=5, fig.width=15, warning=FALSE, include=TRUE, message=FALSE}
distribution_spatial_section <- get_cases_distribution_spatial_section(disease_data, year, col_name = "COD_DPTO_R", plot_title = "Figura 7. Distribucion espacial de casos.")
distribution_spatial_section$map
```

# Conclusiones
a. Los casos totales reportados de `r disease_name` en Colombia en el año `r year` fueron `r nrow(disease_data)`.
b. Los meses de `r months_major_cases` tuvieron el mayor reporte. Es posible que haya un impacto en el menor reporte y/o menor transmisión de `r disease_name` como producto de la pandemia COVID-19 y medidas de control que iniciaron en marzo de `r year`.
c. El reporte de casos de `r disease_name` a lo largo de `r year` predominó en la población de `r distribution_by_age_and_week_section$age_range_major_cases$EDAD` años.
d. El reporte de casos de `r disease_name` predominó a lo largo del año en el sexo masculino.
